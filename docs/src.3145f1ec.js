parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"XeAP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={terrainTypes:{Nrm:0,Mnt:1,Wtr:2,Wll:3},buttons:{TurnEnd:0,Wait:1,Threat:2},gameResult:{None:0,Win:1,Lose:2,GameEnded:3},moveTypes:{infantry:0,cavalry:1,flyer:2},unitTypes:{unitBase:0,pKenshi:1,pTomato:2,pBlueberry:3,pCabbage:4,pKenshiJinlai:5,eKenshi:11,eArcher:12,eCavLance:13,eCavBow:14,eDKAxe:15},moveAssist:{reposition:0,drawBack:1,swap:2}},a=e;exports.default=a;
},{}],"EGTA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/src/consts"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var s=0,u=1,a=2,h=3,c=4,l=function(){function e(t,i){n(this,e),this.hGame=t,this.isEnemy=i,this.ctrlState=s,this.currentButtonID=null,this.currentUnit=null,this.currentDest=null,this.currentTarget=null}return r(e,[{key:"stateDeselect",value:function(){this.currentUnit.eventDeselect(),this.currentUnit=null,null!==this.currentTarget&&(this.currentTarget.eventStopBeingTargeted(),this.currentTarget=null),this.ctrlState=s}},{key:"stateConfirmDestination",value:function(t){this.currentDest=t,this.ctrlState=a,this.currentUnit.eventProposeDestination(t)}},{key:"stateClearButton",value:function(){this.currentButtonID=null}},{key:"stateConfirmTarget",value:function(t){this.ctrlState=h,this.currentTarget=t,this.currentUnit.eventProposeTarget(t),t.eventBeTargeted()}},{key:"stateConfirmMATarget",value:function(t){this.ctrlState=c,this.currentTarget=t,t.eventBeTargeted()}},{key:"clickButton",value:function(e){if(e===t.default.buttons.TurnEnd){if(this.ctrlState===s||this.ctrlState===u)return null===this.currentButtonID?(this.currentButtonID=e,null!==this.currentUnit&&this.stateDeselect(),!0):this.currentButtonID===t.default.buttons.TurnEnd?(this.hGame.eventButtonTurnEnd(),this.stateClearButton(),!0):(this.stateClearButton(),!1);this.stateClearButton()}else if(e===t.default.buttons.Wait){if(this.ctrlState===u)return null===this.currentButtonID?(this.currentButtonID=e,!0):this.currentButtonID===t.default.buttons.Wait?(this.currentUnit.eventExecuteWait(),this.stateDeselect(),this.stateClearButton(),!0):(this.stateClearButton(),!1);this.stateClearButton()}else if(e===t.default.buttons.Threat)return this.hGame.toggleThreat(),!0;return!1}},{key:"clickGP",value:function(t){if(t.x<1||t.x>this.hGame.maxGrid.x||t.y<1||t.y>this.hGame.maxGrid.y)return!1;if(this.stateClearButton(),this.ctrlState===s){null!==this.currentUnit&&(this.currentUnit.eventDeselect(),this.currentUnit=null);var e=this.hGame.findSelfUnitByGridPos(this.isEnemy,t);if(null!==e?(e.isActive()&&(this.ctrlState=u),this.currentUnit=e,e.eventSelect()):null!==(e=this.hGame.findOppoUnitByGridPos(this.isEnemy,t))&&(this.currentUnit=e,e.eventSelect()),null===e)return this.ctrlState=s,!1}else{if(this.ctrlState===u){var n=this.hGame.findUnitByGridPos(t);return null===n&&this.currentUnit.checkMoveDestination(t)?(this.stateConfirmDestination(t),!0):null!==n&&n.isEnemy!==this.isEnemy&&this.currentUnit.checkAttackTarget(n,this.currentUnit.gridPos)?(o("selected an eligible target during dest proposition"),this.stateConfirmDestination(this.currentUnit.gridPos),this.stateConfirmTarget(n),!0):null!==n&&n.unitID!==this.currentUnit.unitID&&n.isEnemy===this.isEnemy&&this.hGame.checkMoveAssist(this.currentUnit,this.currentUnit.gridPos,n)?(this.stateConfirmDestination(this.currentUnit.gridPos),this.stateConfirmMATarget(n),!0):(o("invalid destination"),this.stateDeselect(),!1)}if(this.ctrlState===a){var i=this.hGame.findUnitByGridPos(t);return null===i&&t.x===this.currentDest.x&&t.y===this.currentDest.y?(this.currentUnit.eventExecuteMovement(t),this.stateDeselect(),!0):null!==i&&i.isEnemy!==this.isEnemy&&this.currentUnit.checkAttackTarget(i,this.currentDest)?(this.stateConfirmTarget(i),!0):null!==i&&i.unitID!==this.currentUnit.unitID&&i.isEnemy===this.isEnemy&&this.hGame.checkMoveAssist(this.currentUnit,this.currentDest,i)?(this.stateConfirmMATarget(i),!0):(this.stateDeselect(),!1)}if(this.ctrlState===h)return t.x===this.currentTarget.gridPos.x&&t.y===this.currentTarget.gridPos.y?(this.currentUnit.eventExecuteAttack(this.currentTarget),this.stateDeselect(),!0):(this.stateDeselect(),!1);if(this.ctrlState===c)return t.x===this.currentTarget.gridPos.x&&t.y===this.currentTarget.gridPos.y?(this.hGame.eventExecuteMoveAssist(this.currentUnit,this.currentTarget),this.stateDeselect(),!0):(this.stateDeselect(),!1)}return o("this alert should not happen due to returns. x: "+t.x+", y: "+t.y+";  ctrl state: "+this.ctrlState),!0}}]),e}();function o(t){}exports.default=l;
},{"/src/consts":"XeAP"}],"vIAZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./abstractController"));function e(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}var a=function(){function e(n){var s=this;i(this,e),this.hGame=n,this.hCanvas=n.hCanvas,this.abstractController=new t.default(n,!1),this.clickPosQueue=[],this.isMobile=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),this.isApple=/iPhone|iPad|iPod/i.test(navigator.userAgent);var a=this.isMobile?"touchstart":"click";this.hCanvas.addEventListener(a,function(t){s.mouseClick(s.getMousePosWithinCanvas(t)),s.isMobile&&t.preventDefault()}),this.isMobile&&(this.hCanvas.addEventListener("touchmove",function(t){t.preventDefault()}),this.hCanvas.addEventListener("touchend",function(t){t.preventDefault()}))}return s(e,[{key:"getMousePosWithinCanvas",value:function(t){void 0!==t.touches&&(t=t.touches[0]);var e=this.hCanvas.getBoundingClientRect();return{x:(t.clientX-e.left)/(e.right-e.left)*this.hCanvas.width,y:(t.clientY-e.top)/(e.bottom-e.top)*this.hCanvas.height}}},{key:"mouseClick",value:function(t){this.hGame.isPhaseBlocked||this.hGame.currentPhase===this.hGame.PHASE_PLAYER&&this.clickPosQueue.push(t)}},{key:"update",value:function(t){for(;t>0&&this.clickPosQueue.length>0;){t--;var e=this.clickPosQueue.shift();e.x<=this.hGame.gameWidth&&e.y<=this.hGame.gameHeight?this.abstractController.clickGP(this.hGame.posToGridPos(e)):this.abstractController.clickButton(this.hGame.findButton(e))}}}]),e}();exports.default=a;
},{"./abstractController":"EGTA"}],"t2Tn":[function(require,module,exports) {
"use strict";function i(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function t(i,t){for(var e=0;e<t.length;e++){var l=t[e];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function e(i,e,l){return e&&t(i.prototype,e),l&&t(i,l),i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var l=function(){function t(e,l){i(this,t),this.gridSize=e,this.xMax=l.x,this.yMax=l.y,this.lineHalfWidth=1}return e(t,[{key:"draw",value:function(i){i.fillStyle="#03f";for(var t=0;t<=this.xMax;t++)i.fillRect(t*this.gridSize-this.lineHalfWidth,0-this.lineHalfWidth,2*this.lineHalfWidth,this.yMax*this.gridSize+2*this.lineHalfWidth);for(var e=0;e<=this.yMax;e++)i.fillRect(0-this.lineHalfWidth,e*this.gridSize-this.lineHalfWidth,this.xMax*this.gridSize+2*this.lineHalfWidth,2*this.lineHalfWidth)}}]),t}();exports.default=l;
},{}],"s0jB":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=function(){function t(i,a){e(this,t),this.frame=1,this.maxFrame=100,this.isEnemyPhase=a,this.image=a?document.getElementById("img_effect_EP"):document.getElementById("img_effect_PP"),this.drawX=i.gameWidth+i.gridSize+20,this.drawY=i.gridSize*i.maxGrid.y/2-this.image.height/2,this.hGame=i}return i(t,[{key:"update",value:function(e){this.frame+=e,this.drawX-=22*e,this.frame>this.maxFrame&&this.hGame.eventEffectEnd(this)}},{key:"draw",value:function(e){this.frame<=this.maxFrame&&e.drawImage(this.image,this.drawX,this.drawY)}}]),t}();exports.default=a;
},{}],"NESG":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=function(){function t(a){e(this,t),this.frame=1,this.maxFrame=300,this.image=document.getElementById("img_effect_GameOver"),this.drawX=document.getElementById("gameScreen").width/2-this.image.width/2,this.drawY=a.gameHeight,this.hGame=a}return a(t,[{key:"update",value:function(e){this.frame+=e,this.drawY-=2*this.hGame.gameHeight/this.maxFrame*e,this.frame>this.maxFrame&&this.hGame.eventEffectEnd(this)}},{key:"draw",value:function(e){this.frame<=this.maxFrame&&e.drawImage(this.image,this.drawX,this.drawY)}}]),t}();exports.default=i;
},{}],"KO80":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/src/abstractController")),i=e(require("/src/consts"));function e(t){return t&&t.__esModule?t:{default:t}}function s(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function a(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,i,e){return i&&a(t.prototype,i),e&&a(t,e),t}var o=[3];o[0]=[],o[1]=[{x:0,y:1},{x:-1,y:0},{x:1,y:0},{x:0,y:-1}],o[2]=[{x:0,y:2},{x:-1,y:1},{x:1,y:1},{x:-2,y:0},{x:2,y:0},{x:-1,y:-1},{x:1,y:-1},{x:0,y:-2}];var r=1e5,c=function(){function e(i,a){s(this,e),this.hGame=i,this.maxGrid=this.hGame.maxGrid,this.isEnemy=a,this.isEnemy?(this.suList=i.enemyUnitList,this.ouList=i.playerUnitList):(this.suList=i.playerUnitList,this.ouList=i.enemyUnitList),this.absCon=new t.default(this.hGame,a),this.blockFrameRemain=0,this.blockFramePerAttack=18,this.blockFramePerMove=18,this.blockFramePerWait=5}return n(e,[{key:"executeWait",value:function(t){this.absCon.clickGP(t.gridPos),this.absCon.clickButton(i.default.buttons.Wait),this.absCon.clickButton(i.default.buttons.Wait),this.blockFrameRemain=this.blockFramePerWait}},{key:"executeMove",value:function(t,i){i.x!==t.gridPos.x||i.y!==t.gridPos.y?(this.absCon.clickGP(t.gridPos),this.absCon.clickGP(i),this.absCon.clickGP(i),this.blockFrameRemain=this.blockFramePerMove):executeWait(t)}},{key:"executeMoveAttack",value:function(t,i,e){this.absCon.clickGP(t.gridPos),i.x===t.gridPos.x&&i.y===t.gridPos.y?(this.absCon.clickGP(e.gridPos),this.absCon.clickGP(e.gridPos)):(this.absCon.clickGP(i),this.absCon.clickGP(e.gridPos),this.absCon.clickGP(e.gridPos)),this.blockFrameRemain=this.blockFramePerAttack}},{key:"checkIfGpInMaxGrid",value:function(t,i){return!(t<1||i<1||t>this.maxGrid.x||i>this.maxGrid.y)}},{key:"findBestAttackPosition",value:function(t,i){var e=this,s=o[t.attackRange],a=r,n=null;return s.forEach(function(s){if(e.checkIfGpInMaxGrid(i.gridPos.x+s.x,i.gridPos.y+s.y)&&t.pathData.dist[i.gridPos.x+s.x][i.gridPos.y+s.y]<a){var o={x:i.gridPos.x+s.x,y:i.gridPos.y+s.y},r=e.hGame.findUnitByGridPos(o);null!==r&&r.unitID!==t.unitID||(a=t.pathData.dist[i.gridPos.x+s.x][i.gridPos.y+s.y],n=o)}}),n}},{key:"findOppoUnitAndAttack",value:function(t){var i=this,e=this.suList[t],s=!1;return e.pathData.listAttackable.forEach(function(t){if(!s){var a=i.hGame.findOppoUnitByGridPos(i.isEnemy,t);if(null!==a){var n=i.findBestAttackPosition(e,a);if(null!==n)return i.executeMoveAttack(e,n,a),void(s=!0)}}}),s}},{key:"tryGetClose",value:function(t){var i=this,e=this.suList[t];if(0===e.pathData.listPossibleDest.length)return!1;var s=1e4,a=null;return e.pathData.listPossibleDest.forEach(function(t){if(null===i.hGame.findSelfUnitByGridPos(i.isEnemy,t)){var n=i.hGame.pathFinder.floodFill(e,t,300,!0);i.ouList.forEach(function(i){var e=n.dist[i.gridPos.x][i.gridPos.y];e<s&&(s=e,a=t)})}}),null!==a&&(this.executeMove(e,a),!0)}},{key:"makeOneMove",value:function(){var t=0,i=this.suList.length;for(t=0;t<i;t++)if(this.suList[t].stamina>0){var e=this.findOppoUnitAndAttack(t);return!1===e&&(e=this.tryGetClose(t)),void(!1===e&&this.executeWait(this.suList[t]))}}},{key:"update",value:function(t){this.blockFrameRemain-=t,this.blockFrameRemain<=0&&this.makeOneMove()}}]),e}();exports.default=c;
},{"/src/abstractController":"EGTA","/src/consts":"XeAP"}],"ZdXk":[function(require,module,exports) {
"use strict";function t(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function a(t,a){for(var i=0;i<a.length;i++){var e=a[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function i(t,i,e){return i&&a(t.prototype,i),e&&a(t,e),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=[0,-1,1,0],r=[1,0,0,-1],n=[3];n[0]=[],n[1]=[{x:0,y:1},{x:-1,y:0},{x:1,y:0},{x:0,y:-1}],n[2]=[{x:0,y:2},{x:-1,y:1},{x:1,y:1},{x:-2,y:0},{x:2,y:0},{x:-1,y:-1},{x:1,y:-1},{x:0,y:-2}];var x=1e5,s=function(){function a(i){t(this,a),this.hGame=i,this.maxGrid=i.maxGrid,this.eList=i.enemyUnitList,this.pList=i.playerUnitList,this.hStage=i.stage,this.visited=null,this.path=null}return i(a,[{key:"floodFill",value:function(t,a,i){for(var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],y=[this.maxGrid.x+1],l=[this.maxGrid.x+1],u=[this.maxGrid.x+1],h=1;h<=this.maxGrid.x;h++){y[h]=[this.maxGrid.y+1],l[h]=[this.maxGrid.y+1],u[h]=[this.maxGrid.y+1];for(var o=1;o<=this.maxGrid.y;o++)l[h][o]=x,y[h][o]=null,u[h][o]=!1}var f=[],v=1,d=0;f[v]=a,y[a.x][a.y]=a,l[a.x][a.y]=0;var c=[];c.push(a);var m=[],G=n[t.attackRange];for(this.addAttackable(G,u,m,a.x,a.y);v>d;)if(!(l[f[++d].x][f[d].y]>=i))for(var p=0;p<4;p++){var k=f[d].x+e[p],b=f[d].y+r[p];if(k>=1&&k<=this.maxGrid.x&&b>=1&&b<=this.maxGrid.y&&l[k][b]===x){var P={x:k,y:b};t.checkPassable(P,s)&&(f[++v]=P,l[k][b]=l[f[d].x][f[d].y]+1,y[k][b]=f[d],this.addAttackable(G,u,m,k,b),c.push(P))}}return{prev:y,dist:l,listPossibleDest:c,attackable:u,listAttackable:m}}},{key:"isReachable",value:function(t,a){return t.dist[a.x][a.y]!==x}},{key:"retrievePath",value:function(t,a,i){var e=t.prev;if(null!==e[i.x][i.y]){for(var r=i.x,n=i.y,x=0;r!==a.x||n!==a.y;){x++;var s=e[r][n].x;n=e[r][n].y,r=s}var y=[x];r=i.x,n=i.y;for(var l=0;l<x;l++){y[x-l-1]=e[r][n];var u=e[r][n].x;n=e[r][n].y,r=u}return y}return null}},{key:"findPath",value:function(t,a,i){var e=this.floodFill(t,a,t.moveDist);return this.retrievePath(e,a,i)}},{key:"checkIfGpInMaxGrid",value:function(t,a){return!(t<1||a<1||t>this.maxGrid.x||a>this.maxGrid.y)}},{key:"addAttackable",value:function(t,a,i,e,r){var n=this;t.forEach(function(t){n.checkIfGpInMaxGrid(e+t.x,r+t.y)&&!a[e+t.x][r+t.y]&&(a[e+t.x][r+t.y]=!0,i.push({x:e+t.x,y:r+t.y}))})}}]),a}();exports.default=s;
},{}],"w9XJ":[function(require,module,exports) {
"use strict";function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var t=0;t<i.length;t++){var a=i[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=10,s=function(){function i(t,a,s,r){e(this,i),this.hGame=t,this.img=document.getElementById(a),this.buttonID=s,this.drawGP=r,this.pos=this.hGame.gridPosToPos(r),this.drawScale=1,this.drawScaleMax=1}return t(i,[{key:"checkClick",value:function(e){return e.x>=a+this.pos.x-this.hGame.gridSize*this.drawScale*.5&&e.y>=this.pos.y-this.hGame.gridSize*this.drawScale*.5&&e.x<=a+this.pos.x+this.hGame.gridSize*this.drawScale*.5&&e.y<=this.pos.y+this.hGame.gridSize*this.drawScale*.5}},{key:"eventClick",value:function(){this.drawScale=.7}},{key:"update",value:function(e){this.drawScale<this.drawScaleMax&&(this.drawScale=Math.min(this.drawScale+.02*e,this.drawScaleMax))}},{key:"draw",value:function(e){e.drawImage(this.img,a+this.pos.x-this.hGame.gridSize*this.drawScale*.5,this.pos.y-this.hGame.gridSize*this.drawScale*.5,this.hGame.gridSize*this.drawScale,this.hGame.gridSize*this.drawScale)}}]),i}();exports.default=s;
},{}],"iEAz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("/src/consts"));function t(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}var n=e.default.terrainTypes,s=function(){function e(t,a,r){i(this,e),this.maxGrid=t,this.terrainMap=a,this.unitList=r,this.imageCache=[],this.hGame=null}return r(e,[{key:"initStage",value:function(e){this.hGame=e,this.unitList.forEach(function(t){0===t.appearTurn&&e.eventPlaceUnit(t.gridPos,t.isEnemy,t.typeID,t.params)}),this.imageCache[n.Nrm]=document.getElementById("img_terrain_grass"),this.imageCache[n.Mnt]=document.getElementById("img_terrain_yama"),this.imageCache[n.Wtr]=document.getElementById("img_terrain_kawa")}},{key:"endTurn",value:function(e){this.unitList.forEach(function(t){t.appearTurn===e.turn&&t.isEnemy===(e.currentPhase===e.PHASE_ENEMY)&&e.eventPlaceUnit(t.gridPos,t.isEnemy,t.typeID,t.params)})}},{key:"getTerrain",value:function(e,t){return this.terrainMap[t-1][e-1]}},{key:"update",value:function(e){}},{key:"draw",value:function(e){for(var t=1;t<=this.maxGrid.x;t++)for(var i=1;i<=this.maxGrid.y;i++){var a=this.hGame.gridPosToPos({x:t,y:i});e.drawImage(this.imageCache[this.getTerrain(t,i)],a.x-this.hGame.gridSize/2,a.y-this.hGame.gridSize/2,this.hGame.gridSize,this.hGame.gridSize)}}}]),e}();exports.default=s;
},{"/src/consts":"XeAP"}],"tBPV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=N;var r=t(require("/src/stage")),e=t(require("/src/consts"));function t(r){return r&&r.__esModule?r:{default:r}}var m=e.default.terrainTypes,n=e.default.unitTypes,s={x:6,y:8},a=[[m.Mnt,m.Nrm,m.Nrm,m.Mnt,m.Mnt,m.Mnt],[m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Mnt,m.Mnt],[m.Wtr,m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Mnt],[m.Wtr,m.Wtr,m.Wtr,m.Nrm,m.Nrm,m.Nrm],[m.Nrm,m.Nrm,m.Wtr,m.Nrm,m.Wtr,m.Nrm],[m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Wtr,m.Wtr],[m.Mnt,m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Nrm],[m.Mnt,m.Mnt,m.Mnt,m.Nrm,m.Nrm,m.Nrm]],p=[{gridPos:{x:4,y:4},appearTurn:0,isEnemy:!1,typeID:n.pKenshi,params:{}},{gridPos:{x:2,y:2},appearTurn:0,isEnemy:!1,typeID:n.pKenshi,params:{}},{gridPos:{x:3,y:1},appearTurn:0,isEnemy:!1,typeID:n.pKenshi,params:{}},{gridPos:{x:4,y:2},appearTurn:0,isEnemy:!1,typeID:n.pKenshi,params:{}},{gridPos:{x:3,y:2},appearTurn:0,isEnemy:!0,typeID:n.eArcher,params:{}}];function N(){return new r.default(s,a,p)}
},{"/src/stage":"iEAz","/src/consts":"XeAP"}],"uVTU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=N;var r=m(require("/src/stage")),e=m(require("/src/consts"));function m(r){return r&&r.__esModule?r:{default:r}}var s=e.default.terrainTypes,a=e.default.unitTypes,p={x:6,y:8},n=[[s.Nrm,s.Mnt,s.Mnt,s.Nrm,s.Nrm,s.Nrm],[s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm],[s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Wtr],[s.Nrm,s.Nrm,s.Nrm,s.Wtr,s.Nrm,s.Mnt],[s.Nrm,s.Wtr,s.Nrm,s.Wtr,s.Nrm,s.Mnt],[s.Nrm,s.Wtr,s.Nrm,s.Nrm,s.Nrm,s.Nrm],[s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm],[s.Nrm,s.Nrm,s.Nrm,s.Mnt,s.Mnt,s.Nrm]],t=[{gridPos:{x:2,y:7},appearTurn:0,isEnemy:!1,typeID:a.pKenshi,params:{}},{gridPos:{x:3,y:7},appearTurn:0,isEnemy:!1,typeID:a.pKenshi,params:{}},{gridPos:{x:4,y:7},appearTurn:0,isEnemy:!1,typeID:a.pKenshi,params:{}},{gridPos:{x:5,y:7},appearTurn:0,isEnemy:!1,typeID:a.pKenshi,params:{}},{gridPos:{x:1,y:1},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}},{gridPos:{x:3,y:2},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}},{gridPos:{x:4,y:1},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}},{gridPos:{x:3,y:4},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}},{gridPos:{x:5,y:2},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}}];function N(){return new r.default(p,n,t)}
},{"/src/stage":"iEAz","/src/consts":"XeAP"}],"seVJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=N;var r=m(require("/src/stage")),e=m(require("/src/consts"));function m(r){return r&&r.__esModule?r:{default:r}}var s=e.default.terrainTypes,a=e.default.unitTypes,p={x:6,y:8},n=[[s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm],[s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm],[s.Nrm,s.Mnt,s.Nrm,s.Nrm,s.Mnt,s.Nrm],[s.Nrm,s.Mnt,s.Nrm,s.Nrm,s.Mnt,s.Nrm],[s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm],[s.Nrm,s.Nrm,s.Mnt,s.Mnt,s.Nrm,s.Nrm],[s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm],[s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm,s.Nrm]],i=[{gridPos:{x:2,y:7},appearTurn:0,isEnemy:!1,typeID:a.pKenshi,params:{}},{gridPos:{x:3,y:7},appearTurn:0,isEnemy:!1,typeID:a.pKenshi,params:{}},{gridPos:{x:4,y:7},appearTurn:0,isEnemy:!1,typeID:a.pKenshi,params:{}},{gridPos:{x:5,y:7},appearTurn:0,isEnemy:!1,typeID:a.pKenshi,params:{}},{gridPos:{x:3,y:1},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}},{gridPos:{x:3,y:2},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}},{gridPos:{x:3,y:3},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}},{gridPos:{x:2,y:1},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}},{gridPos:{x:4,y:1},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}},{gridPos:{x:4,y:2},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}},{gridPos:{x:4,y:3},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}},{gridPos:{x:5,y:1},appearTurn:0,isEnemy:!0,typeID:a.eKenshi,params:{}}];function N(){return new r.default(p,n,i)}
},{"/src/stage":"iEAz","/src/consts":"XeAP"}],"IyT7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=y;var r=a(require("/src/stage")),e=a(require("/src/consts"));function a(r){return r&&r.__esModule?r:{default:r}}var m=e.default.terrainTypes,s=e.default.unitTypes,p={x:6,y:8},n=[[m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Nrm],[m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Mnt,m.Nrm],[m.Nrm,m.Wtr,m.Nrm,m.Nrm,m.Mnt,m.Nrm],[m.Nrm,m.Wtr,m.Nrm,m.Nrm,m.Nrm,m.Nrm],[m.Nrm,m.Wtr,m.Nrm,m.Nrm,m.Mnt,m.Nrm],[m.Nrm,m.Nrm,m.Nrm,m.Mnt,m.Mnt,m.Nrm],[m.Wtr,m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Nrm],[m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Nrm]],i=[{gridPos:{x:2,y:7},appearTurn:0,isEnemy:!1,typeID:s.pTomato,params:{}},{gridPos:{x:3,y:7},appearTurn:0,isEnemy:!1,typeID:s.pKenshiJinlai,params:{}},{gridPos:{x:4,y:7},appearTurn:0,isEnemy:!1,typeID:s.pBlueberry,params:{}},{gridPos:{x:5,y:7},appearTurn:0,isEnemy:!1,typeID:s.pCabbage,params:{}},{gridPos:{x:1,y:1},appearTurn:0,isEnemy:!0,typeID:s.eKenshi,params:{}},{gridPos:{x:1,y:3},appearTurn:0,isEnemy:!0,typeID:s.eKenshi,params:{}},{gridPos:{x:2,y:1},appearTurn:0,isEnemy:!0,typeID:s.eKenshi,params:{}},{gridPos:{x:3,y:1},appearTurn:0,isEnemy:!0,typeID:s.eKenshi,params:{}},{gridPos:{x:4,y:1},appearTurn:0,isEnemy:!0,typeID:s.eKenshi,params:{}},{gridPos:{x:5,y:1},appearTurn:0,isEnemy:!0,typeID:s.eKenshi,params:{}},{gridPos:{x:3,y:2},appearTurn:0,isEnemy:!0,typeID:s.eKenshi,params:{}},{gridPos:{x:1,y:5},appearTurn:0,isEnemy:!0,typeID:s.eKenshi,params:{}},{gridPos:{x:3,y:4},appearTurn:0,isEnemy:!0,typeID:s.eKenshi,params:{}},{gridPos:{x:6,y:5},appearTurn:0,isEnemy:!0,typeID:s.eKenshi,params:{}},{gridPos:{x:6,y:4},appearTurn:0,isEnemy:!0,typeID:s.eKenshi,params:{}}];function y(){return new r.default(p,n,i)}
},{"/src/stage":"iEAz","/src/consts":"XeAP"}],"cMJq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var r=a(require("/src/stage")),e=a(require("/src/consts"));function a(r){return r&&r.__esModule?r:{default:r}}var m=e.default.terrainTypes,p=e.default.unitTypes,s={x:6,y:8},n=[[m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Nrm],[m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Mnt,m.Nrm],[m.Nrm,m.Wtr,m.Nrm,m.Nrm,m.Mnt,m.Nrm],[m.Nrm,m.Wtr,m.Nrm,m.Nrm,m.Nrm,m.Nrm],[m.Nrm,m.Wtr,m.Nrm,m.Nrm,m.Mnt,m.Nrm],[m.Nrm,m.Nrm,m.Nrm,m.Mnt,m.Mnt,m.Nrm],[m.Wtr,m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Nrm],[m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Nrm,m.Nrm]],y=[{gridPos:{x:2,y:7},appearTurn:0,isEnemy:!1,typeID:p.pTomato,params:{}},{gridPos:{x:3,y:7},appearTurn:0,isEnemy:!1,typeID:p.pKenshiJinlai,params:{}},{gridPos:{x:4,y:7},appearTurn:0,isEnemy:!1,typeID:p.pBlueberry,params:{}},{gridPos:{x:5,y:7},appearTurn:0,isEnemy:!1,typeID:p.pCabbage,params:{}},{gridPos:{x:1,y:1},appearTurn:0,isEnemy:!0,typeID:p.eCavBow,params:{}},{gridPos:{x:1,y:3},appearTurn:0,isEnemy:!0,typeID:p.eArcher,params:{}},{gridPos:{x:3,y:1},appearTurn:0,isEnemy:!0,typeID:p.eCavLance,params:{}},{gridPos:{x:5,y:1},appearTurn:0,isEnemy:!0,typeID:p.eDKAxe,params:{}},{gridPos:{x:3,y:2},appearTurn:0,isEnemy:!0,typeID:p.eKenshi,params:{}},{gridPos:{x:1,y:5},appearTurn:0,isEnemy:!0,typeID:p.eKenshi,params:{}},{gridPos:{x:3,y:4},appearTurn:0,isEnemy:!0,typeID:p.eKenshi,params:{}},{gridPos:{x:6,y:5},appearTurn:0,isEnemy:!0,typeID:p.eKenshi,params:{}},{gridPos:{x:6,y:4},appearTurn:0,isEnemy:!0,typeID:p.eArcher,params:{}}];function t(){return new r.default(s,n,y)}
},{"/src/stage":"iEAz","/src/consts":"XeAP"}],"WpDS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("/src/stages/stage0")),e=r(require("/src/stages/stage1")),n=r(require("/src/stages/stage2")),i=r(require("/src/stages/stage3")),a=r(require("/src/stages/stage4"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var l=function(){function r(){s(this,r),this.list=[100],this.defaultStageIdx=4,this.list[0]=t.default,this.list[1]=e.default,this.list[2]=n.default,this.list[3]=i.default,this.list[4]=a.default}return u(r,[{key:"loadStage",value:function(t,e){var n=this.list[parseInt(t)];e.stage=n()}},{key:"getStageListStringForMapSelecter",value:function(){return'\n\t\tMap:\n\t\t<select id="divSelecter_list">\n\t\t\t<option value="0">Stage 00</option>\n\t\t\t<option value="1">Stage 01</option>\n\t\t\t<option value="2">Stage 02</option>\n\t\t\t<option value="3">Stage 03</option>\n\t\t\t<option value="4" selected>Stage 04</option>\n\t\t</select>\n\t\t<button id="divSelecter_confirm">Confirm</button>\n\t\t<br />\n\t\t'}}]),r}();exports.default=l;
},{"/src/stages/stage0":"tBPV","/src/stages/stage1":"uVTU","/src/stages/stage2":"seVJ","/src/stages/stage3":"IyT7","/src/stages/stage4":"cMJq"}],"iHGx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/src/consts"));function e(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function a(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}var h=t.default.terrainTypes,o=function(){function e(s,a,h,o){i(this,e),this.unitID=s,this.hGame=a,this.gridPos=h,this.coordinate=a.gridPosToPos(h),this.imageID="img_kenshi",this.imageSize={x:a.gridSize,y:a.gridSize},this.isEnemy=o,this.staminaMax=1,this.moveDistMax=2,this.attackRange=1,this.params=null,this.moveType=t.default.moveTypes.infantry,this.pathData=null}return a(e,[{key:"initAfterCreation",value:function(){this.image=document.getElementById(this.imageID),this.hp=1,this.attack=255,this.alive=!0,this.stamina=0,this.moveDist=this.moveDistMax,this.resetControlState(),this.resetProposal()}},{key:"resetControlState",value:function(){this.drawScale=1,this.isSelected=!1,this.isTargeted=!1}},{key:"resetProposal",value:function(){this.hasDestProposal=!1,this.destProposalGP=null,this.destProposalCoord=null,this.pathToDestProposal=null,this.pathToDestProposalCoord=null,this.hasTargetProposal=!1,this.targetProposal=null,this.isTargeted=!1}},{key:"isActive",value:function(){return!(this.stamina<=0)}},{key:"eventNewTurn",value:function(){this.stamina=this.staminaMax,this.moveDist=this.moveDistMax}},{key:"eventRequirePathUpdate",value:function(){this.updatePathData()}},{key:"updatePathData",value:function(){this.pathData=this.hGame.pathFinder.floodFill(this,this.gridPos,this.moveDist)}},{key:"eventSelect",value:function(){this.isSelected=!0,this.drawScale=1.15}},{key:"eventDeselect",value:function(){this.resetControlState(),this.resetProposal()}},{key:"checkTerrain",value:function(e){return this.moveType===t.default.moveTypes.flyer||this.hGame.stage.getTerrain(e.x,e.y)===h.Nrm}},{key:"checkStopable",value:function(t,e){var i=this.hGame.findUnitByGridPos(t);return(null===i||i===e||i===this)&&this.checkTerrain(t)}},{key:"checkPassable",value:function(t){return!(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&null!==this.hGame.findOppoUnitByGridPos(this.isEnemy,t))&&this.checkTerrain(t)}},{key:"checkMoveDestination",value:function(t){return!(Math.abs(t.x-this.gridPos.x)+Math.abs(t.y-this.gridPos.y)>this.moveDistMax)&&!!this.hGame.pathFinder.isReachable(this.pathData,t)}},{key:"acceptPath",value:function(t){this.pathToDestProposal=t,this.pathToDestProposalCoord=[t.length];for(var e=t.length,i=0;i<e;i++)this.pathToDestProposalCoord[i]=this.hGame.gridPosToPos(t[i])}},{key:"eventProposeDestination",value:function(t){this.hasDestProposal=!0,this.destProposalGP=t,this.destProposalCoord=this.hGame.gridPosToPos(t),this.acceptPath(this.hGame.pathFinder.retrievePath(this.pathData,this.gridPos,t))}},{key:"executeAction",value:function(){this.stamina--,this.resetProposal(),this.hGame.eventActionExecuted()}},{key:"eventExecuteMovement",value:function(){this.stamina=1,this.gridPos=this.destProposalGP,this.coordinate=this.hGame.gridPosToPos(this.gridPos),this.executeAction()}},{key:"eventUseMoveAssist",value:function(t){this.gridPos=t,this.coordinate=this.hGame.gridPosToPos(this.gridPos),this.executeAction()}},{key:"eventMovedByMoveAssist",value:function(t){this.gridPos=t,this.coordinate=this.hGame.gridPosToPos(this.gridPos)}},{key:"checkAttackTarget",value:function(t,e){return 0!==this.attackRange&&Math.abs(t.gridPos.x-e.x)+Math.abs(t.gridPos.y-e.y)===this.attackRange}},{key:"eventProposeTarget",value:function(t){this.targetProposal=t,this.hasTargetProposal=!0}},{key:"eventBeTargeted",value:function(){this.isTargeted=!0}},{key:"eventStopBeingTargeted",value:function(){this.isTargeted=!1}},{key:"eventExecuteAttack",value:function(t){this.gridPos=this.destProposalGP,this.coordinate=this.hGame.gridPosToPos(this.gridPos),this.hGame.eventBattle(this,t),this.executeAction()}},{key:"eventExecuteWait",value:function(){this.stamina=1,this.executeAction()}},{key:"eventLoseHP",value:function(t){this.hp-=t,this.hp<=0&&(this.alive=!1,this.hGame.eventUnitDeath(this))}},{key:"isInPhase",value:function(){return this.isEnemy&&this.hGame.currentPhase===this.hGame.PHASE_ENEMY||!this.isEnemy&&this.hGame.currentPhase===this.hGame.PHASE_PLAYER}},{key:"update",value:function(t){}},{key:"drawThreat",value:function(t){var e=this;this.isSelected&&(t.fillStyle="rgba(255,238,238,0.8)",this.pathData.listAttackable.forEach(function(i){if(!e.hGame.pathFinder.isReachable(e.pathData,i)){var s=e.hGame.gridPosToPos(i);t.fillRect(s.x-.45*e.imageSize.x,s.y-.45*e.imageSize.y,.9*e.imageSize.x,.9*e.imageSize.y)}}),t.fillStyle="rgba(238,238,255,0.5)",this.pathData.listPossibleDest.forEach(function(i){var s=e.hGame.gridPosToPos(i);t.fillRect(s.x-.45*e.imageSize.x,s.y-.45*e.imageSize.y,.9*e.imageSize.x,.9*e.imageSize.y)}))}},{key:"drawUnitBG",value:function(t){if(this.isSelected||this.isTargeted?this.isEnemy?t.fillStyle="rgba(255,85,85,0.9)":t.fillStyle="rgba(136,136,238,0.9)":this.isActive()||!this.isInPhase()?this.isEnemy?t.fillStyle="rgba(255,140,140,0.8)":t.fillStyle="rgba(170,170,255,0.8)":this.isEnemy?t.fillStyle="rgba(255,238,238,0.8)":t.fillStyle="rgba(238,238,255,0.8)",t.fillRect(this.coordinate.x-.45*this.imageSize.x,this.coordinate.y-.45*this.imageSize.y,.9*this.imageSize.x,.9*this.imageSize.y),this.hasDestProposal){if(null!==this.pathToDestProposal){this.isEnemy?t.fillStyle="rgba(255,170,170,0.7)":t.fillStyle="rgba(170,204,255,0.7)";for(var e=this.pathToDestProposal.length,i=1;i<e;i++)t.fillRect(this.pathToDestProposalCoord[i].x-.45*this.imageSize.x,this.pathToDestProposalCoord[i].y-.45*this.imageSize.y,.9*this.imageSize.x,.9*this.imageSize.y)}this.isEnemy?t.fillStyle="#e88":t.fillStyle="#88e",t.fillRect(this.destProposalCoord.x-.45*this.imageSize.x,this.destProposalCoord.y-.45*this.imageSize.y,.9*this.imageSize.x,.9*this.imageSize.y)}}},{key:"drawUnit",value:function(t){this.hasDestProposal?t.drawImage(this.image,this.destProposalCoord.x-this.imageSize.x*this.drawScale/2,this.destProposalCoord.y-this.imageSize.y*this.drawScale/2,this.imageSize.x*this.drawScale,this.imageSize.y*this.drawScale):t.drawImage(this.image,this.coordinate.x-this.imageSize.x*this.drawScale/2,this.coordinate.y-this.imageSize.y*this.drawScale/2,this.imageSize.x*this.drawScale,this.imageSize.y*this.drawScale)}}]),e}();exports.default=o;
},{"/src/consts":"XeAP"}],"d7N1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/src/unitBase"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(e){function o(t,e,u,f,c){var s;return n(this,o),(s=r(this,i(o).call(this,t,e,u,f))).params=c,s}return f(o,t.default),o}();exports.default=s;
},{"/src/unitBase":"iHGx"}],"mcCa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/src/units/protoPlayer"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=function(e){function o(t,e,u,c,f){var a;return n(this,o),(a=r(this,i(o).call(this,t,e,u,c,f))).imageID="img_kenshi",a.staminaMax=1,a.moveDistMax=2,a.attackRange=1,a}return c(o,t.default),o}();exports.default=a;
},{"/src/units/protoPlayer":"d7N1"}],"H7rx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/src/units/protoPlayer"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=function(e){function o(t,e,u,c,f){var a;return n(this,o),(a=r(this,i(o).call(this,t,e,u,c,f))).imageID="img_kenshi",a.staminaMax=2,a.moveDistMax=2,a.attackRange=1,a}return c(o,t.default),o}();exports.default=a;
},{"/src/units/protoPlayer":"d7N1"}],"Uk6C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("/src/units/protoPlayer")),e=o(require("/src/consts"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=function(o){function r(t,o,i,f,s){var a;return n(this,r),(a=u(this,c(r).call(this,t,o,i,f,s))).imageID="img_tomato",a.staminaMax=1,a.moveDistMax=2,a.attackRange=0,a.params.moveAssist=e.default.moveAssist.drawBack,a}return f(r,t.default),r}();exports.default=a;
},{"/src/units/protoPlayer":"d7N1","/src/consts":"XeAP"}],"Bn1s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("/src/units/protoPlayer")),e=o(require("/src/consts"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=function(o){function r(t,o,i,f,s){var a;return n(this,r),(a=u(this,c(r).call(this,t,o,i,f,s))).imageID="img_blueberry",a.staminaMax=2,a.moveDistMax=2,a.attackRange=0,a.params.moveAssist=e.default.moveAssist.swap,a}return f(r,t.default),r}();exports.default=a;
},{"/src/units/protoPlayer":"d7N1","/src/consts":"XeAP"}],"ne55":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("/src/units/protoPlayer")),e=o(require("/src/consts"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=function(o){function r(t,o,i,f,s){var a;return n(this,r),(a=u(this,c(r).call(this,t,o,i,f,s))).imageID="img_cabbage",a.staminaMax=1,a.moveDistMax=2,a.attackRange=0,a.params.moveAssist=e.default.moveAssist.reposition,a}return f(r,t.default),r}();exports.default=a;
},{"/src/units/protoPlayer":"d7N1","/src/consts":"XeAP"}],"P4zA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/src/units/protoEnemy"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=function(e){function o(t,e,u,c,f){var a;return n(this,o),(a=r(this,i(o).call(this,t,e,u,c,f))).imageID="img_kenshi2",a.staminaMax=1,a.moveDistMax=2,a.attackRange=1,a}return c(o,t.default),o}();exports.default=a;
},{"/src/units/protoEnemy":"d7N1"}],"Mj46":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/src/units/protoEnemy"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=function(e){function o(t,e,u,c,f){var a;return n(this,o),(a=r(this,i(o).call(this,t,e,u,c,f))).imageID="img_eArcher",a.staminaMax=1,a.moveDistMax=2,a.attackRange=2,a}return c(o,t.default),o}();exports.default=a;
},{"/src/units/protoEnemy":"d7N1"}],"X8AR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("/src/units/protoEnemy")),e=o(require("/src/consts"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(o){function r(t,o,i,f,a){var s;return n(this,r),(s=u(this,c(r).call(this,t,o,i,f,a))).imageID="img_eKibaYari",s.staminaMax=1,s.moveDistMax=3,s.attackRange=1,s.moveType=e.default.moveTypes.cavalry,s}return f(r,t.default),r}();exports.default=s;
},{"/src/units/protoEnemy":"d7N1","/src/consts":"XeAP"}],"Z44D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("/src/units/protoEnemy")),e=o(require("/src/consts"));function o(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(o){function n(t,o,i,f,a){var s;return r(this,n),(s=u(this,c(n).call(this,t,o,i,f,a))).imageID="img_eKibaYumi",s.staminaMax=1,s.moveDistMax=3,s.attackRange=2,s.moveType=e.default.moveTypes.cavalry,s}return f(n,t.default),n}();exports.default=s;
},{"/src/units/protoEnemy":"d7N1","/src/consts":"XeAP"}],"VyCu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("/src/units/protoEnemy")),e=o(require("/src/consts"));function o(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=function(o){function n(t,o,i,f,s){var a;return r(this,n),(a=u(this,c(n).call(this,t,o,i,f,s))).imageID="img_eDK",a.staminaMax=1,a.moveDistMax=2,a.attackRange=1,a.moveType=e.default.moveTypes.flyer,a}return f(n,t.default),n}();exports.default=a;
},{"/src/units/protoEnemy":"d7N1","/src/consts":"XeAP"}],"SsC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("/src/consts")),t=h(require("/src/unitBase")),i=h(require("/src/units/pKenshi")),r=h(require("/src/units/pKenshiJinlai")),s=h(require("/src/units/pTomato")),u=h(require("/src/units/pBlueberry")),n=h(require("/src/units/pCabbage")),a=h(require("/src/units/eKenshi")),l=h(require("/src/units/eArcher")),c=h(require("/src/units/eCavLance")),o=h(require("/src/units/eCavBow")),f=h(require("/src/units/eDKAxe"));function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,i){return t&&p(e.prototype,t),i&&p(e,i),e}var q=e.default.unitTypes,v=function(){function e(){d(this,e),this.list=[60],this.list[q.unitBase]=t.default,this.list[q.pKenshi]=i.default,this.list[q.pKenshiJinlai]=r.default,this.list[q.pTomato]=s.default,this.list[q.pBlueberry]=u.default,this.list[q.pCabbage]=n.default,this.list[q.eKenshi]=a.default,this.list[q.eArcher]=l.default,this.list[q.eCavLance]=c.default,this.list[q.eCavBow]=o.default,this.list[q.eDKAxe]=f.default}return b(e,[{key:"createUnit",value:function(e,t,i,r,s,u){return s===q.unitBase?new this.list[s](e,t,i,r):new this.list[s](e,t,i,r,u)}}]),e}();exports.default=v;
},{"/src/consts":"XeAP","/src/unitBase":"iHGx","/src/units/pKenshi":"mcCa","/src/units/pKenshiJinlai":"H7rx","/src/units/pTomato":"Uk6C","/src/units/pBlueberry":"Bn1s","/src/units/pCabbage":"ne55","/src/units/eKenshi":"P4zA","/src/units/eArcher":"Mj46","/src/units/eCavLance":"X8AR","/src/units/eCavBow":"Z44D","/src/units/eDKAxe":"VyCu"}],"ofXf":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=function(){function t(r){e(this,t),this.hGame=r,this.dUser=[10],this.dTarget=[10];for(var i=0;i<=9;i++)this.dUser[i]=null,this.dTarget[i]=null}return r(t,[{key:"copyToFourDirs",value:function(){this.dUser[8]={x:this.dUser[2].x,y:-this.dUser[2].y},this.dUser[6]={x:this.dUser[2].y,y:this.dUser[2].x},this.dUser[4]={x:-this.dUser[2].y,y:this.dUser[2].x},this.dTarget[8]={x:this.dTarget[2].x,y:-this.dTarget[2].y},this.dTarget[6]={x:this.dTarget[2].y,y:this.dTarget[2].x},this.dTarget[4]={x:-this.dTarget[2].y,y:this.dTarget[2].x}}},{key:"getDirection",value:function(e,t){var r=t.gridPos.x-e.x,i=t.gridPos.y-e.y;return r>1||r<-1||i>1||i<-1?null:5+r-3*i}},{key:"checkIfGpInMaxGrid",value:function(e){return!(e.x<1||e.y<1||e.x>this.hGame.maxGrid.x||e.y>this.hGame.maxGrid.y)}},{key:"checkEligibility",value:function(e,t,r){var i=this.getDirection(t,r);if(null===i)return!1;if(null===this.dUser[i])return!1;var s={x:t.x+this.dUser[i].x,y:t.y+this.dUser[i].y};if(!this.checkIfGpInMaxGrid(s))return!1;if(!e.checkStopable(s,r))return!1;var a={x:r.gridPos.x+this.dTarget[i].x,y:r.gridPos.y+this.dTarget[i].y};return!!this.checkIfGpInMaxGrid(a)&&!!r.checkStopable(a,e)}},{key:"execute",value:function(e,t){var r=this.getDirection(e.destProposalGP,t);t.eventMovedByMoveAssist({x:t.gridPos.x+this.dTarget[r].x,y:t.gridPos.y+this.dTarget[r].y}),e.eventUseMoveAssist({x:e.destProposalGP.x+this.dUser[r].x,y:e.destProposalGP.y+this.dUser[r].y})}}]),t}();exports.default=i;
},{}],"scND":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("/src/skills/moveAssist")),t=i(require("/src/consts"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}var u=function(){function i(s){r(this,i),this.hGame=s,this.list=[10];var n=new e.default(s);n.dUser[2]={x:0,y:0},n.dTarget[2]={x:0,y:-2},n.copyToFourDirs(),this.list[t.default.moveAssist.reposition]=n;var u=new e.default(s);u.dUser[2]={x:0,y:-1},u.dTarget[2]={x:0,y:-1},u.copyToFourDirs(),this.list[t.default.moveAssist.drawBack]=u;var l=new e.default(s);l.dUser[2]={x:0,y:1},l.dTarget[2]={x:0,y:-1},l.copyToFourDirs(),this.list[t.default.moveAssist.swap]=l}return n(i,[{key:"checkEligibility",value:function(e,t,i,r){return null!==this.list[e]&&this.list[e].checkEligibility(t,i,r)}},{key:"execute",value:function(e,t,i){return null!==this.list[e]&&(this.list[e].execute(t,i),!0)}}]),i}();exports.default=u;
},{"/src/skills/moveAssist":"ofXf","/src/consts":"XeAP"}],"vCMN":[function(require,module,exports) {
"use strict";function i(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function t(i,t){for(var h=0;h<t.length;h++){var s=t[h];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function h(i,h,s){return h&&t(i.prototype,h),s&&t(i,s),i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=[0,-1,1,0],e=[1,0,0,-1],a=function(){function t(h){i(this,t),this.hGame=h,this.maxGrid=h.maxGrid,this.flagShowThreat=!1,this.threatMap=[this.maxGrid.x+1];for(var s=1;s<=this.maxGrid.x;s++)this.threatMap[s]=[this.maxGrid.y+1];this.thickness=2,this.drawOffsetX=[-this.hGame.gridSize/2-this.thickness,-this.hGame.gridSize/2-this.thickness,this.hGame.gridSize/2-this.thickness,-this.hGame.gridSize/2-this.thickness],this.drawOffsetY=[this.hGame.gridSize/2-this.thickness,-this.hGame.gridSize/2-this.thickness,-this.hGame.gridSize/2-this.thickness,-this.hGame.gridSize/2-this.thickness],this.drawDX=[this.hGame.gridSize+2*this.thickness,2*this.thickness,2*this.thickness,this.hGame.gridSize+2*this.thickness],this.drawDY=[2*this.thickness,this.hGame.gridSize+2*this.thickness,this.hGame.gridSize+2*this.thickness,2*this.thickness]}return h(t,[{key:"updateThreatMap",value:function(){for(var i=this,t=1;t<=this.maxGrid.x;t++)for(var h=1;h<=this.maxGrid.y;h++)this.threatMap[t][h]=!1;this.hGame.enemyUnitList.forEach(function(t){t.pathData.listAttackable.forEach(function(t){i.threatMap[t.x][t.y]=!0})})}},{key:"toggleThreat",value:function(){this.flagShowThreat=!this.flagShowThreat}},{key:"checkIfGpInMaxGrid",value:function(i,t){return!(i<1||t<1||i>this.maxGrid.x||t>this.maxGrid.y)}},{key:"draw",value:function(i){if(this.flagShowThreat)for(var t=1;t<=this.maxGrid.x;t++)for(var h=1;h<=this.maxGrid.y;h++)if(this.threatMap[t][h]){i.fillStyle="rgba(255,50,50,0.1)",i.fillRect(this.hGame.gridPosToPosX(t)-.5*this.hGame.gridSize,this.hGame.gridPosToPosY(h)-.5*this.hGame.gridSize,1*this.hGame.gridSize,1*this.hGame.gridSize);for(var a=0;a<4;a++)this.checkIfGpInMaxGrid(t+s[a],h+e[a])&&(this.threatMap[t+s[a]][h+e[a]]||(i.fillStyle="rgba(255,50,50,1)",i.fillRect(this.hGame.gridPosToPosX(t)+this.drawOffsetX[a],this.hGame.gridPosToPosY(h)+this.drawOffsetY[a],this.drawDX[a],this.drawDY[a])))}}}]),t}();exports.default=a;
},{}],"HPsM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("/src/grid")),e=l(require("/src/effects/effectStartPhase")),i=l(require("/src/effects/effectGameOver")),s=l(require("/src/enemyAI")),n=l(require("/src/pathFinder")),a=l(require("/src/consts")),r=l(require("/src/button")),u=l(require("/src/stages/stageList")),h=l(require("/src/units/unitCreator")),o=l(require("/src/skills/moveAssistList")),f=l(require("/src/ui/threatMap"));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function y(t,e,i){return e&&d(t.prototype,e),i&&d(t,i),t}var P=function(){function l(e,i,s){c(this,l),this.PHASE_NONE=0,this.PHASE_PLAYER=1,this.PHASE_ENEMY=2,this.gameWidth=e,this.gameHeight=i,this.hCanvas=s,this.maxGrid={x:6,y:8},this.gridSize=e/this.maxGrid.x,this.grid=new t.default(this.gridSize,this.maxGrid),this.stageList=new u.default,this.unitCreator=new h.default,this.moveAssistList=new o.default(this),this.buttonList=[],this.makeButtons(),this.resetGameState()}return y(l,[{key:"resetGameState",value:function(){this.playerUnitList=[],this.enemyUnitList=[],this.unitID=0,this.effectList=[],this.currentPhase=this.PHASE_NONE,this.isPhaseBlocked=!1,this.framesBeforeChangePhase=0,this.turn=0,this.stage=null,this.enemyAI=new s.default(this,!0),this.pathFinder=new n.default(this),this.gameResult=a.default.gameResult.None,this.threatMap=new f.default(this)}},{key:"makeButtons",value:function(){this.buttonList.push(new r.default(this,"img_button_wait",a.default.buttons.Wait,{x:7,y:1})),this.buttonList.push(new r.default(this,"img_button_turn_end",a.default.buttons.TurnEnd,{x:7,y:2})),this.buttonList.push(new r.default(this,"img_button_threat",a.default.buttons.Threat,{x:7,y:8}))}},{key:"bindPlayerInputHandler",value:function(t){this.playerInputHandler=t}},{key:"eventPlaceUnit",value:function(t,e,i,s){this.unitID++;var n=e?this.enemyUnitList:this.playerUnitList,a=this.unitCreator.createUnit(this.unitID,this,t,e,i,s);n.push(a),a.initAfterCreation()}},{key:"startDefaultStage",value:function(){this.start(this.stageList.defaultStageIdx)}},{key:"start",value:function(t){this.resetGameState(),this.stageList.loadStage(t,this),this.stage.initStage(this),this.playerPhase(),this.requirePathUpdate()}},{key:"requirePathUpdate",value:function(){this.playerUnitList.forEach(function(t){return t.eventRequirePathUpdate()}),this.enemyUnitList.forEach(function(t){return t.eventRequirePathUpdate()}),this.updateThreatMap()}},{key:"updateThreatMap",value:function(){this.threatMap.updateThreatMap()}},{key:"toggleThreat",value:function(){this.threatMap.toggleThreat()}},{key:"countActiveUnits",value:function(){var t=0,e=null;return this.currentPhase===this.PHASE_PLAYER&&(e=this.playerUnitList),this.currentPhase===this.PHASE_ENEMY&&(e=this.enemyUnitList),null===e?0:(e.forEach(function(e){e.isActive()&&t++}),t)}},{key:"eventActionExecuted",value:function(){0===this.countActiveUnits()&&this.endPhase(),this.requirePathUpdate()}},{key:"eventButtonTurnEnd",value:function(){(this.currentPhase===this.PHASE_PLAYER?this.playerUnitList:this.enemyUnitList).forEach(function(t){t.isActive()&&t.eventExecuteWait()})}},{key:"playerPhase",value:function(){this.turn++,this.currentPhase=this.PHASE_PLAYER,this.playerUnitList.forEach(function(t){t.eventNewTurn()})}},{key:"enemyPhase",value:function(){this.currentPhase=this.PHASE_ENEMY,this.enemyUnitList.forEach(function(t){t.eventNewTurn()})}},{key:"addNewEffect",value:function(t){this.effectList.push(t)}},{key:"endPhase",value:function(){this.stage.endTurn(this),this.framesBeforeChangePhase=80,this.isPhaseBlocked=!0,this.currentPhase===this.PHASE_PLAYER?this.addNewEffect(new e.default(this,!0)):this.currentPhase===this.PHASE_ENEMY&&this.addNewEffect(new e.default(this,!1))}},{key:"procChangePhase",value:function(t){this.framesBeforeChangePhase-=t,this.framesBeforeChangePhase<=0&&(this.isPhaseBlocked=!1,this.currentPhase===this.PHASE_PLAYER?this.enemyPhase():this.currentPhase===this.PHASE_ENEMY&&this.playerPhase())}},{key:"findUnitInListByGridPos",value:function(t,e){for(var i=t.length,s=0;s<i;s++)if(t[s].gridPos.x===e.x&&t[s].gridPos.y===e.y)return t[s];return null}},{key:"findPlayerUnitByGridPos",value:function(t){return this.findUnitInListByGridPos(this.playerUnitList,t)}},{key:"findEnemyUnitByGridPos",value:function(t){return this.findUnitInListByGridPos(this.enemyUnitList,t)}},{key:"findSelfUnitByGridPos",value:function(t,e){return t?this.findEnemyUnitByGridPos(e):this.findPlayerUnitByGridPos(e)}},{key:"findOppoUnitByGridPos",value:function(t,e){return t?this.findPlayerUnitByGridPos(e):this.findEnemyUnitByGridPos(e)}},{key:"findUnitByGridPos",value:function(t){var e=this.findPlayerUnitByGridPos(t);return null!==e?e:null!==(e=this.findEnemyUnitByGridPos(t))?e:null}},{key:"findButton",value:function(t){var e=null;return this.buttonList.forEach(function(i){i.checkClick(t)&&(e=i.buttonID,i.eventClick())}),e}},{key:"mouseClick",value:function(t){}},{key:"eventBattle",value:function(t,e){e.eventLoseHP(t.attack)}},{key:"eventUnitDeath",value:function(t){t.isEnemy?m(t,this.enemyUnitList):(m(t,this.playerUnitList),this.gameResult=a.default.gameResult.Lose),this.enemyUnitList.length<=0?this.gameResult=a.default.gameResult.Win:this.playerUnitList.length<=0&&(this.gameResult=a.default.gameResult.Lose)}},{key:"eventEffectEnd",value:function(t){m(t,this.effectList)}},{key:"checkMoveAssist",value:function(t,e,i){return null!==t.params&&void 0!==t.params.moveAssist&&null!==t.params.moveAssist&&this.moveAssistList.checkEligibility(t.params.moveAssist,t,e,i)}},{key:"eventExecuteMoveAssist",value:function(t,e){return null!==t.params&&void 0!==t.params.moveAssist&&null!==t.params.moveAssist&&this.moveAssistList.execute(t.params.moveAssist,t,e)}},{key:"gameEnds",value:function(){this.gameResult===a.default.gameResult.Win&&(alert("You win!"),this.gameResult=a.default.gameResult.GameEnded),this.gameResult===a.default.gameResult.Lose&&(this.addNewEffect(new i.default(this)),this.gameResult=a.default.gameResult.GameEnded)}},{key:"update",value:function(t){this.gameResult!==a.default.gameResult.None&&this.gameEnds(),this.buttonList.forEach(function(e){return e.update(t)}),this.framesBeforeChangePhase>0&&this.procChangePhase(t),this.gameResult===a.default.gameResult.None&&(this.currentPhase===this.PHASE_ENEMY&&this.enemyAI.update(t),this.currentPhase===this.PHASE_PLAYER&&this.playerInputHandler.update(t)),this.playerUnitList.forEach(function(e){return e.update(t)}),this.enemyUnitList.forEach(function(e){return e.update(t)}),this.effectList.forEach(function(e){return e.update(t)})}},{key:"draw",value:function(t){this.stage.draw(t),this.buttonList.forEach(function(e){return e.draw(t)}),this.grid.draw(t),this.playerUnitList.forEach(function(e){return e.drawThreat(t)}),this.enemyUnitList.forEach(function(e){return e.drawThreat(t)}),this.playerUnitList.forEach(function(e){return e.drawUnitBG(t)}),this.enemyUnitList.forEach(function(e){return e.drawUnitBG(t)}),this.playerUnitList.forEach(function(e){return e.drawUnit(t)}),this.enemyUnitList.forEach(function(e){return e.drawUnit(t)}),this.threatMap.draw(t),this.effectList.forEach(function(e){return e.draw(t)})}},{key:"gridPosToPos",value:function(t){return{x:t.x*this.gridSize-this.gridSize/2,y:t.y*this.gridSize-this.gridSize/2}}},{key:"gridPosToPosX",value:function(t){return t*this.gridSize-this.gridSize/2}},{key:"gridPosToPosY",value:function(t){return t*this.gridSize-this.gridSize/2}},{key:"posToGridPos",value:function(t){return{x:Math.floor(t.x/this.gridSize)+1,y:Math.floor(t.y/this.gridSize)+1}}}]),l}();function m(t,e){var i=e.length,s=0;for(s=0;s<i&&e[s]!==t;s++);e.splice(s,1)}exports.default=P;
},{"/src/grid":"t2Tn","/src/effects/effectStartPhase":"s0jB","/src/effects/effectGameOver":"NESG","/src/enemyAI":"KO80","/src/pathFinder":"ZdXk","/src/consts":"XeAP","/src/button":"w9XJ","/src/stages/stageList":"WpDS","/src/units/unitCreator":"SsC4","/src/skills/moveAssistList":"scND","/src/ui/threatMap":"vCMN"}],"dW2r":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function t(n){e(this,t),document.getElementById("mapSelecter").innerHTML=n.stageList.getStageListStringForMapSelecter(),document.getElementById("divSelecter_confirm").addEventListener("click",function(e){var t=document.getElementById("divSelecter_list"),r=t.options[t.selectedIndex].value;n.start(r)})};exports.default=t;
},{}],"H99C":[function(require,module,exports) {
"use strict";var e=n(require("/src/inputHandler")),t=n(require("/src/game")),a=n(require("/src/mapSelecter")),r=n(require("/src/consts"));function n(e){return e&&e.__esModule?e:{default:e}}var l=document.getElementById("gameScreen"),s=l.getContext("2d"),i=360,c=640,u=430,d=640,o=new t.default(i,c,l),m=new e.default(o);o.bindPlayerInputHandler(m);var f=new a.default(o);o.startDefaultStage();var g=0;function v(e){var t=e-g;g=e;var a=t/16;s.clearRect(0,0,u,d),o.update(a),o.draw(s),requestAnimationFrame(v)}function y(){for(var e=document.getElementsByClassName("collapsible"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){this.classList.toggle("active");var e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"})}y(),requestAnimationFrame(v);
},{"/src/inputHandler":"vIAZ","/src/game":"HPsM","/src/mapSelecter":"dW2r","/src/consts":"XeAP"}]},{},["H99C"], null)
//# sourceMappingURL=src.3145f1ec.js.map